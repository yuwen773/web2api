核心请求头分析

  1. 认证相关（最重要）

  ┌──────────────────────────────┬───────────────────────────────────────┐
  │            Header            │                 说明                  │
  ├──────────────────────────────┼───────────────────────────────────────┤
  │ authorization                │ JWT token，登录后获取，必需           │
  ├──────────────────────────────┼───────────────────────────────────────┤
  │ server_name_session (Cookie) │ 会话 session，配合 authorization 使用 │
  └──────────────────────────────┴───────────────────────────────────────┘

  2. 应用特定（可能校验）

  ┌───────────────────────┬─────────────────────────────────────────┐
  │        Header         │                  说明                   │
  ├───────────────────────┼─────────────────────────────────────────┤
  │ x-app-version: 2.14.0 │ 应用版本号，后端可能据此做版本兼容/校验 │
  └───────────────────────┴─────────────────────────────────────────┘

  3. 浏览器指纹（反爬检测）

  ┌────────────────────┬──────────────────┐
  │       Header       │       说明       │
  ├────────────────────┼──────────────────┤
  │ sec-ch-ua          │ 浏览器品牌和版本 │
  ├────────────────────┼──────────────────┤
  │ sec-ch-ua-mobile   │ 是否移动端       │
  ├────────────────────┼──────────────────┤
  │ sec-ch-ua-platform │ 操作系统平台     │
  ├────────────────────┼──────────────────┤
  │ user-agent         │ 完整 UA 信息     │
  └────────────────────┴──────────────────┘

  4. 安全相关（CORS）

  ┌────────────────┬────────────────────────────────────┐
  │     Header     │                说明                │
  ├────────────────┼────────────────────────────────────┤
  │ origin         │ 请求来源：https://ai.aurod.cn      │
  ├────────────────┼────────────────────────────────────┤
  │ referer        │ 来源页面：https://ai.aurod.cn/chat │
  ├────────────────┼────────────────────────────────────┤
  │ sec-fetch-dest │ 请求目标类型                       │
  ├────────────────┼────────────────────────────────────┤
  │ sec-fetch-mode │ 请求模式：cors                     │
  ├────────────────┼────────────────────────────────────┤
  │ sec-fetch-site │ 站点关系：same-origin              │
  └────────────────┴────────────────────────────────────┘

  ---
  ---
  重要修正（2025-02-26 测试验证）

  ⚠️ **authorization 不需要 Bearer 前缀**

  ```python
  # ❌ 错误
  headers["authorization"] = f"Bearer {token}"

  # ✅ 正确
  headers["authorization"] = token  # 直接传 JWT，不要 Bearer 前缀
  ```

  ---
  建议

  最小必需请求头（用于 API 调用）：
  authorization: <your_jwt_token>  # 注意：不要加 Bearer 前缀！
  x-app-version: 2.14.0
  content-type: application/json

  完整请求头（防止反爬检测）：
  authorization: <token>
  x-app-version: 2.14.0
  content-type: application/json
  user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36...
  sec-ch-ua: "Not:A-Brand";v="99", "Microsoft Edge";v="145", "Chromium";v="145"
  referer: https://ai.aurod.cn/chat
  origin: https://ai.aurod.cn
  sec-fetch-site: same-origin
  sec-fetch-mode: cors

  x-app-version 是该平台特有的 Header，建议保留，服务端可能用它做版本控制或鉴权。